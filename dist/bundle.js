!function(e){var n={};function r(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=n,r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,n){if(1&n&&(e=r(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)r.d(t,o,function(n){return e[n]}.bind(null,o));return t},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="",r(r.s=4)}([function(e,n,r){"use strict";e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var r=function(e,n){var r=e[1]||"",t=e[3];if(!t)return r;if(n&&"function"==typeof btoa){var o=(i=t,s=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),a=t.sources.map((function(e){return"/*# sourceURL=".concat(t.sourceRoot||"").concat(e," */")}));return[r].concat(a).concat([o]).join("\n")}var i,s,c;return[r].join("\n")}(n,e);return n[2]?"@media ".concat(n[2]," {").concat(r,"}"):r})).join("")},n.i=function(e,r,t){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(t)for(var a=0;a<this.length;a++){var i=this[a][0];null!=i&&(o[i]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);t&&o[c[0]]||(r&&(c[2]?c[2]="".concat(r," and ").concat(c[2]):c[2]=r),n.push(c))}},n}},function(e,n,r){var t=r(2),o=r(3);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var a={insert:"head",singleton:!1};t(o,a);e.exports=o.locals||{}},function(e,n,r){"use strict";var t,o=function(){return void 0===t&&(t=Boolean(window&&document&&document.all&&!window.atob)),t},a=function(){var e={};return function(n){if(void 0===e[n]){var r=document.querySelector(n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}e[n]=r}return e[n]}}(),i=[];function s(e){for(var n=-1,r=0;r<i.length;r++)if(i[r].identifier===e){n=r;break}return n}function c(e,n){for(var r={},t=[],o=0;o<e.length;o++){var a=e[o],c=n.base?a[0]+n.base:a[0],u=r[c]||0,l="".concat(c," ").concat(u);r[c]=u+1;var d=s(l),h={css:a[1],media:a[2],sourceMap:a[3]};-1!==d?(i[d].references++,i[d].updater(h)):i.push({identifier:l,updater:b(h,n),references:1}),t.push(l)}return t}function u(e){var n=document.createElement("style"),t=e.attributes||{};if(void 0===t.nonce){var o=r.nc;o&&(t.nonce=o)}if(Object.keys(t).forEach((function(e){n.setAttribute(e,t[e])})),"function"==typeof e.insert)e.insert(n);else{var i=a(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}return n}var l,d=(l=[],function(e,n){return l[e]=n,l.filter(Boolean).join("\n")});function h(e,n,r,t){var o=r?"":t.media?"@media ".concat(t.media," {").concat(t.css,"}"):t.css;if(e.styleSheet)e.styleSheet.cssText=d(n,o);else{var a=document.createTextNode(o),i=e.childNodes;i[n]&&e.removeChild(i[n]),i.length?e.insertBefore(a,i[n]):e.appendChild(a)}}function f(e,n,r){var t=r.css,o=r.media,a=r.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),a&&btoa&&(t+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}var m=null,p=0;function b(e,n){var r,t,o;if(n.singleton){var a=p++;r=m||(m=u(n)),t=h.bind(null,r,a,!1),o=h.bind(null,r,a,!0)}else r=u(n),t=f.bind(null,r,n),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return t(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;t(e=n)}else o()}}e.exports=function(e,n){(n=n||{}).singleton||"boolean"==typeof n.singleton||(n.singleton=o());var r=c(e=e||[],n);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var t=0;t<r.length;t++){var o=s(r[t]);i[o].references--}for(var a=c(e,n),u=0;u<r.length;u++){var l=s(r[u]);0===i[l].references&&(i[l].updater(),i.splice(l,1))}r=a}}}},function(e,n,r){"use strict";r.r(n);var t=r(0),o=r.n(t)()(!1);o.push([e.i,":root {\r\n  --body-bg-color: #201d1d;\r\n  --font-color: #a9a9a9;\r\n  --btn-red-color: #f71b1b;\r\n  --btn-yellow-color: #ffff37;\r\n  --btn-green-color: #16fc16;\r\n  --btn-blue-color: #238aff;\r\n  --menu-hover-color: #bdffff;\r\n  --box-shadow-color: #000000;\r\n}\r\n\r\nhtml,\r\nbody {\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n\r\nhtml {\r\n  font-family: Verdana, Geneva, Tahoma, sans-serif;\r\n  font-size: 100%;\r\n}\r\n\r\nbody {\r\n  margin: 0;\r\n  padding: 0;\r\n  background-color: var(--body-bg-color);\r\n  color: var(--font-color);\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;  \r\n}\r\n\r\n.menu {\r\n  display: flex;\r\n  flex-direction: column;\r\n  row-gap: 4vw;\r\n}\r\n\r\n.menu button, .end-btn{\r\n  display: flex;\r\n  justify-content: space-evenly;\r\n  align-items: center;\r\n  cursor: pointer;\r\n  border: 2px solid var(--font-color);\r\n  background-color: transparent;\r\n  color: var(--font-color);\r\n  border-radius: 50px;\r\n  font-size: 5vw;\r\n  width: 42vw;\r\n  height: 13vw;\r\n}\r\n\r\n.end-btn {\r\n  width: 55vw;\r\n  height: 13vw;\r\n}\r\n\r\n.menu button:hover, .end-btn:hover {\r\n  color: var(--menu-hover-color);\r\n  border-color: var(--menu-hover-color);\r\n  box-shadow: inset 0 0 10px var(--menu-hover-color);\r\n}\r\n\r\n.menu button:active, .end-btn:active {\r\n  color: var(--menu-hover-color);\r\n  border-color: var(--menu-hover-color);\r\n  box-shadow: inset 0 0 10px var(--menu-hover-color),\r\n    0 -2px 5px 2px var(--box-shadow-color);\r\n  transform: translateY(2px);\r\n}\r\n\r\n.menu button:focus, .end-btn:focus{\r\n  outline: none;\r\n}\r\n\r\n.scoreboard {\r\n  height: 40%;\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-around;\r\n  font-size: 2rem;\r\n}\r\n\r\n.scoreboard > div {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-evenly;\r\n  align-items: center;\r\n}\r\n\r\n#score-value::after {\r\n  content: attr(data-score);\r\n}\r\n\r\n#round-value::after {\r\n  content: attr(data-round);\r\n}\r\n\r\n.end-panel {\r\n  height: 60%;\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  row-gap: 5vw;\r\n}\r\n\r\n#end-msg {\r\n  font-size: 8vw;\r\n  margin-bottom: 10vw;\r\n}\r\n\r\n.gameboard {\r\n  height: 60%;\r\n  width: 100%;\r\n  display: grid;\r\n  grid-template-columns: auto auto;\r\n}\r\n\r\n.pad-btn {\r\n  cursor: pointer;\r\n  outline: none;\r\n  border: none;\r\n  opacity: 0.4;\r\n}\r\n\r\n.pad-btn.active{\r\n  z-index: 1;\r\n  opacity: 1;  \r\n}\r\n\r\n.btn-red {\r\n  background-color: var(--btn-red-color);\r\n}\r\n\r\n.btn-red.active {\r\n  box-shadow: 0 0 15px 5px var(--btn-red-color);\r\n}\r\n\r\n.btn-yellow {\r\n  background-color: var(--btn-yellow-color);\r\n}\r\n\r\n.btn-yellow.active {\r\n  box-shadow: 0 0 15px 5px var(--btn-yellow-color);\r\n}\r\n\r\n.btn-green {\r\n  background-color: var(--btn-green-color);\r\n}\r\n\r\n.btn-green.active {\r\n  box-shadow: 0 0 15px 5px var(--btn-green-color);\r\n}\r\n\r\n.btn-blue {\r\n  background-color: var(--btn-blue-color);\r\n}\r\n\r\n.btn-blue.active {\r\n  box-shadow: 0 0 15px 5px var(--btn-blue-color);\r\n}\r\n\r\n.hidden {\r\n  display: none;\r\n}\r\n\r\n@media (min-width: 600px) {\r\n  body {\r\n    flex-direction: row;\r\n    justify-content: center;\r\n    column-gap: 50px;\r\n  }\r\n\r\n  .menu {\r\n    row-gap: 25px;\r\n  }\r\n\r\n  .menu button {\r\n    font-size: 1.8rem;\r\n    width: 230px;\r\n    height: 60px;\r\n  }\r\n\r\n  .scoreboard {\r\n    width: 25%;\r\n    flex-direction: column;\r\n    justify-content: space-evenly;\r\n  }\r\n\r\n  .gameboard {\r\n    width: 400px;\r\n    height: 400px;\r\n  }\r\n\r\n  .end-panel {\r\n    width: 400px;\r\n    height: 400px;\r\n    row-gap: 25px;\r\n  }\r\n\r\n  #end-msg {\r\n    font-size: 3rem;\r\n    margin-bottom: 15px;\r\n  }\r\n\r\n  .end-btn{\r\n    font-size: 1.8rem;\r\n    width: 300px;\r\n    height: 60px;\r\n  }\r\n}\r\n\r\n/* body {\r\n  border: solid yellow;\r\n}\r\n\r\n.menu {\r\n  display: none;\r\n  border: solid orangered;\r\n}\r\n\r\n.scoreboard,\r\n.scoreboard > div {\r\n  display: none;\r\n  border: solid blue;\r\n}\r\n\r\n.gameboard {\r\n  display: none;\r\n  border: solid red;\r\n}\r\n\r\n.end-panel {\r\n  display: none;\r\n  border: solid green;\r\n} */\r\n",""]),n.default=o},function(e,n,r){"use strict";r.r(n);r(1);class t{constructor(){this.audioContext=new AudioContext,this.masterGainNode=this.audioContext.createGain(),this.masterGainNode.connect(this.audioContext.destination),this.noteTable=this.createNoteTable()}createNoteTable(){let e=Array.from({length:14},()=>[]);return e[2].B=123.47082531403103,e[3].G=195.9977179908746,e[3].B=246.94165062806206,e[4].C=261.6255653005986,e[4]["C#"]=277.1826309768721,e[4].D=293.6647679174076,e[4]["D#"]=311.12698372208087,e[4].E=329.6275569128699,e[4].F=349.2282314330039,e[4].G=391.99543598174927,e[4].A=440,e[4]["A#"]=466.1637615180899,e[5].C=523.2511306011972,e[5].D=587.3295358348151,e}getNoteFrequency(e,n){return this.noteTable[e][n]}createSound(e,n){let r;return r=this.audioContext.createOscillator(),r.connect(this.masterGainNode),r.type=e,r.frequency.value=n,r}}const o="menu",a="start",i="level",s="scoreboard",c="score-value",u="round-value",l="gameboard",d="btn-red",h="btn-yellow",f="btn-green",m="btn-blue",p="end-panel",b="end-msg",v="restart",y="change-lvl",g="hidden",w={menu:document.querySelector("."+o),start:document.querySelector("#"+a),levels:[...document.querySelectorAll("."+i)],scoreboard:document.querySelector("."+s),scoreValue:document.querySelector("#"+c),roundValue:document.querySelector("#"+u),gameboard:document.querySelector("."+l),boardBtn:[document.querySelector("."+d),document.querySelector("."+h),document.querySelector("."+f),document.querySelector("."+m)],endPanel:document.querySelector("."+p),endMsg:document.querySelector("#"+b),restartBtn:document.querySelector("#"+v),chgLvlBtn:document.querySelector("#"+y)},x=e=>{e.style.display="none"},q=e=>{e.classList.toggle(g)},S=e=>{w.scoreValue.dataset.score=e},B=e=>{w.roundValue.dataset.round=e};class C{constructor(){this.gameStarted=!1,this.currentFrequency=null,this.audioComp=new t,this.gameButtons=[{frequency:this.audioComp.getNoteFrequency(3,"G")},{frequency:this.audioComp.getNoteFrequency(4,"D")},{frequency:this.audioComp.getNoteFrequency(4,"C")},{frequency:this.audioComp.getNoteFrequency(4,"E")}],this.difficulty=new Map([[0,8],[1,13],[2,21],[3,34]]),this.decreaseTimeAt=5,this.decreaseFactor=.85,this.messages=new Map([[0,"Game Over!"],[1,"Congratulations!"]])}startNewGame(e){this.gameStarted=!0,this.userTurn=!1,this.score=0,this.round=1,this.roundInputs=[],this.lastRound=this.difficulty.get(Number(e)),this.timePressets=this.loadTimePressets(),S(this.score),B(this.round),this.gameSequence=Array.from({length:this.lastRound},()=>Math.floor(4*Math.random())),this.playGameSequence()}loadTimePressets(){return{sequenceBefore:.5,sequenceBetween:.1,padDuration:.5,gameOverBefore:.1,gameOverBetween:.13,nextRoundBefore:.5}}async playGameSequence(){let e=0;await this.timer(this.timePressets.sequenceBefore);for(const n of this.gameSequence){if(++e>this.round)break;await this.playAwaitStop(n,"triangle",this.getButtonFrequency(n),this.timePressets.padDuration),await this.timer(this.timePressets.sequenceBetween)}this.userTurn=!0}async playAwaitStop(e,n,r,t){this.play(e,n,r),await this.timer(t),this.stop(e)}userAction(e,n){"press"==e?this.play(n,"triangle",this.getButtonFrequency(n)):(this.stop(n),this.roundInputs.push(n),n!==this.gameSequence[this.roundInputs.length-1]?(this.userTurn=!1,this.gameOver()):(S(++this.score),this.roundInputs.length===this.round&&(this.userTurn=!1,this.round===this.lastRound?this.showResult(1):this.nextRound())))}async gameOver(){const e=function*(e){for(;;)e>3&&(e=0),yield e++}(0);await this.timer(this.timePressets.gameOverBefore);for(let n of Array.from({length:4}))await this.playAwaitStop(e.next().value,"triangle",this.audioComp.getNoteFrequency(4,"D#"),this.timePressets.gameOverBetween);this.showResult(0)}showResult(e){var n;this.gameStarted=!1,n=this.messages.get(e),q(w.gameboard),q(w.endPanel),w.endMsg.textContent=n}async nextRound(){this.roundInputs=[],this.round%this.decreaseTimeAt==0&&(this.timePressets.padDuration*=this.decreaseFactor,this.timePressets.sequenceBetween*=this.decreaseFactor),B(++this.round),await this.timer(this.timePressets.nextRoundBefore),this.playGameSequence()}play(e,n,r){var t;this.currentFrequency||(this.currentFrequency=this.audioComp.createSound(n,r),this.currentFrequency.start(),t=e,w.boardBtn[t].classList.add("active"))}stop(e){var n;this.currentFrequency&&(this.currentFrequency.stop(),this.currentFrequency=null,n=e,w.boardBtn[n].classList.remove("active"))}getButtonFrequency(e){return this.gameButtons.find((n,r)=>r===e).frequency}timer(e){return new Promise(n=>{setTimeout(()=>{n()},1e3*e)})}}(e=>{const n=new C;return{init:()=>{let r;(()=>{q(w.scoreboard),q(w.gameboard),q(w.endPanel);for(const e of w.levels)x(e)})(),["touchend","click"].forEach(n=>{e.start.addEventListener(n,e=>{e.preventDefault(),(()=>{x(w.start);for(const e of w.levels)e.style.display="flex"})()})});for(const t of e.levels)["touchend","click"].forEach(e=>{t.addEventListener(e,e=>{e.preventDefault(),r=t.dataset.level,q(w.menu),q(w.scoreboard),q(w.gameboard),n.startNewGame(r)})});e.boardBtn.forEach((e,r)=>{["touchstart","mousedown"].forEach(t=>{e.addEventListener(t,e=>{e.preventDefault(),n.gameStarted&&n.userTurn&&n.userAction("press",r)})}),["touchend","mouseup"].forEach(t=>{e.addEventListener(t,e=>{e.preventDefault(),n.gameStarted&&n.userTurn&&n.userAction("release",r)})})}),["touchend","click"].forEach(t=>{e.restartBtn.addEventListener(t,e=>{e.preventDefault(),q(w.endPanel),q(w.gameboard),n.startNewGame(r)}),e.chgLvlBtn.addEventListener(t,e=>{e.preventDefault(),q(w.scoreboard),q(w.endPanel),q(w.menu)})})}}})(w).init()}]);